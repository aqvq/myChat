## Conda操作

1. 首先安装anaconda或者miniconda

anaconda: [https://www.anaconda.com/download/](https://www.anaconda.com/download/)

miniconda: [https://docs.conda.io/en/latest/miniconda.html](https://docs.conda.io/en/latest/miniconda.html)
 
两者区别见[https://blog.csdn.net/qq_18668137/article/details/80807829](https://blog.csdn.net/qq_18668137/article/details/80807829)
 
2. 配置 configure：此处为添加清华源

```bash
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/bioconda
conda config --set show_channel_urls yes
```

3. 查看已配置的channels

```bash
conda config --get channels
```

4. 创建环境和安装包

```bash
conda create -n env_name package_name  # 创建env_name环境以及在该环境下安装package_name包

# 激活或者禁用当前环境
source activate env_name
source deactivate env_name  

# 查看所有的环境，带*的为激活的环境
conda info --env
conda env list

conda create -n env_name python=3.5  # 在env_name 环境中指定暗转python3.5版本
conda list  # 列出当前环境下所有安装包
conda list -n my_env  # 列出 my_env环境中所有的安装包
conda list --export > package-list.txt  # 把当前环境中的所有包导出list，以备后续使用
conda create -n my_env --file package-list.txt  # 对导出的包list重新安装到my_env 环境中
conda search package_name  # 搜索是否有这个安装包，没有的话无法使用conda install 安装

#在env_name环境中安装包
source activate env_name
conda install package_name 

```

例如: 创建外显子测序流程中测序分析环境wes，并在wes中安装外显子分析相关软件，安装完毕后activate环境即可在该环境下分析wes，以避免软件冲突

```bash
conda create -n wes bcftools vcftools python=2 bwa
source activate wes
```

5. 删除环境
```bash
conda env remove -n env_name 
```

6. conda安装/卸载当前channels中不存在的包

```bash
anaconda search -t conda xxx #首先搜索包和对应的channel，注意这里是anaconda，而不是conda
anaconda show rpetit3/aspera-connect #查看包详情
conda install -c rpetit3 aspera-connect  #安装rpetit3 channel中的aspera-connect包
```

7. 更新和卸载包

```bash
conda update package_name
conda uninstall package_name
conda remove package_name
conda uninstall -n env package_name # 删除env环境中的xxx包 uninstall可以用remove代替
```

8. conda 更新

```bash
conda update conda
```

## Windows Terminal配置Anaconda

> Windows Terminal在Win11中内置，Win10可在应用商店下载
> 出现权限错误时请尝试使用管理员身份运行

- 名称：Anaconda
- 命令行：cmd.exe /K C:\Users\shang\anaconda3\Scripts\activate.bat
- 启动目录：%USERPROFILE%
- 不使用父进程目录（否则可能会默认进入C盘的Windows目录）
- 图标：C:\Users\shang\anaconda3\Menu\anaconda-navigator.ico
- 选项卡标题：Anaconda



## 使用批处理文件配置Conda环境

```bash
call D:\Users\Username\anaconda3\Scripts\activate.bat D:\Users\Username\anaconda3
call conda activate envname
cd /d D:\WorkSpace\projectdir
python pyfilename.py
pause
```

其中`Username`替换为自己的用户名；
`envname`替换为自己的环境名
`/d` 替换为自己的python文件所在盘符
`D:\WorkSpace\projectdir`替换为自己的Python文件目录
`pyfilename.py`替换为自己的py文件名

**示例：**

```bash
echo "激活conda环境"
call C:\Users\shang\anaconda3\Scripts\activate.bat C:\Users\shang\anaconda3
echo "激活rl环境"
call conda activate rl
echo "进入工作目录"
cd C:\Users\shang\Documents\rl
echo "执行命令"
python example.py
pause

```
